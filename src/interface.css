/* Ensure padding and borders are included in the element's dimensions */
*,
*::before,
*::after {
    box-sizing: border-box;
}

/* Selectors Container */
.selectors-container {
    display: flex;
    align-items: center;
    padding: 10px;
    background: #343541;
    color: #FFFFFF;
}

.selector-group {
    display: flex;
    align-items: center;
    margin-right: 20px;
}

.selector-group label {
    margin-right: 10px;
}

.selector-group select {
    background: #444654;
    color: #FFFFFF;
    border: none;
    padding: 5px;
    border-radius: 5px;
}

/* Base Layout */
body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    color: #343541;
    background: #343541;
}

.chat-layout {
    display: flex;
    height: 100vh;
}

/* Sidebar Styles */
.sidebar {
    width: 260px;
    background: #202123;
    display: flex;
    flex-direction: column;
    color: #FFFFFF;
}

.nav-header {
    padding: 10px;
}

.new-chat {
    width: 100%;
    padding: 12px;
    background: transparent;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 5px;
    color: white;
    cursor: pointer;
    transition: background 0.2s;
}

.new-chat:hover {
    background: rgba(255,255,255,0.1);
}

.chat-list-container {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

#chat-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

#chat-list li {
    display: flex;
    align-items: center;
    padding: 10px;
    margin: 2px 0;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.2s;
}

#chat-list li:hover {
    background: rgba(255,255,255,0.1);
}

#chat-list li.active {
    background: rgba(255,255,255,0.1);
}

.chat-name {
    flex: 1;
    color: #FFFFFF;
    font-size: 14px;
}

.delete-chat-btn {
    color: rgba(255,255,255,0.5);
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    padding: 0 5px;
}

.delete-chat-btn:hover {
    color: #FF4444;
}

.nav-footer {
    padding: 10px;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.settings-button {
    width: 100%;
    padding: 10px;
    background: transparent;
    border: none;
    color: rgba(255,255,255,0.8);
    cursor: pointer;
    border-radius: 5px;
    transition: background 0.2s;
}

.settings-button:hover {
    background: rgba(255,255,255,0.1);
}

/* Main Chat Area */
.main-chat {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #343541;
    position: relative;
    min-height: 0;
}

.messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px 20px 0 20px;
    min-height: 0;
}

.message {
    max-width: 800px;
    margin: 0 auto 20px auto;
    padding: 20px 15px 50px 15px;
    line-height: 1.6;
    position: relative;
}

/* Style for the copy button */
.copy-button {
    background: none;
    border: none;
    color: #AAA;
    cursor: pointer;
    padding: 5px;
    border-radius: 5px;
    transition: background 0.2s, color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    flex-shrink: 0;
}

.copy-button svg {
    width: 16px;
    height: 16px;
}

.copy-button path {
    fill: currentColor;
}

.copy-button:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #FFF;
}

/* Adjustments for light mode */
body.light-mode .copy-button {
    color: #666;
}

body.light-mode .copy-button:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #000;
}

.message.user {
    background: #343541;
}

.message.assistant {
    background: #444654;
}

.message .text {
    color: #FFFFFF;
    font-size: 15px;
}

/* Input Area */
.input-area {
    padding: 20px;
    background: #343541;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.input-container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    background: #40414F;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

#user-input {
    width: 100%;
    background: transparent;
    border: none;
    padding: 15px 45px 15px 15px;
    color: white;
    font-size: 15px;
    resize: none;
    box-sizing: border-box;
    border-radius: 10px;
}

#user-input:focus {
    outline: none;
}

.send-button {
    position: absolute;
    right: 10px;
    bottom: 8px;
    background: transparent;
    border: none;
    color: #FFFFFF;
    cursor: pointer;
    padding: 5px;
    border-radius: 5px;
    transition: background 0.2s;
}

.send-button:hover {
    background: rgba(255,255,255,0.1);
}


@keyframes slideIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

.modal-content {
    background: #FFFFFF;
    width: 90%;
    max-width: 400px;
    margin: 80px auto;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    animation: slideIn 0.3s ease;
    position: relative;
}

/* Modal Header */
.modal-header {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    padding: 20px;
    background: #f2f2f7;
    border-bottom: 1px solid #e5e5ea;
}

.modal-header h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: #1c1c1e;
}

/* Close Button */
.close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    transition: transform 0.2s;
}

.close svg {
    width: 20px;
    height: 20px;
    fill: #1c1c1e;
}

.close:hover {
    transform: rotate(90deg);
}

/* Modal Body */
.modal-body {
    padding: 24px;
}

.input-group {
    margin-bottom: 24px;
}

.input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.input-icon {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    color: #8E8E93;
    pointer-events: none;
}

.input-group label,
.input-group span {
    display: block;
    margin-bottom: 8px;
    font-size: 14px;
    color: #3a3a3c;
}

.input-group input[type="text"],
.input-group input[type="password"] {
    width: 100%;
    padding: 12px 36px 12px 12px;
    border: 1px solid #E5E5EA;
    border-radius: 8px;
    font-size: 15px;
    color: #1C1C1E;
    background: #FFFFFF;
    transition: all 0.2s ease;
}

.input-group input[type="text"]:focus,
.input-group input[type="password"]:focus {
    border-color: #007AFF;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
    outline: none;
}

.input-group input[type="text"]:focus,
.input-group input[type="password"]:focus {
    border-color: #007aff;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3);
    outline: none;
}


/* Save Button */
#save-settings-btn {
    width: 100%;
    padding: 15px;
    background: #007aff;
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.2s;
}

#save-settings-btn:hover {
    background-color: #005bbb;
    transform: scale(1.02);
}


/* Settings Modal Adjustments */
.modal-content label,
.modal-content span {
    margin-top: 20px;
    font-size: 15px;
}

.modal-content input,
.modal-content select {
    margin-top: 5px;
}

.modal-content input,
.modal-content select,
.modal-content {
    width: 100%;
}

/* Light Mode Modal Title Color */
body .modal-content h2 {
    color: #000000;
}

/* Light Mode Styles */
body {
    background-color: #F5F5F5;
    color: #000000;
}

 .sidebar {
    background: #FFFFFF;
    color: #000000;
}

 .new-chat {
    border: 1px solid rgba(0, 0, 0, 0.2);
    color: #000000;
}

 .new-chat:hover {
    background: rgba(0, 0, 0, 0.1);
}

 .chat-list-container {
    background: #FFFFFF;
}

 #chat-list li {
    background: #FFFFFF;
    color: #000000;
}

 #chat-list li:hover,
 #chat-list li.active {
    background: rgba(0, 0, 0, 0.1);
}

 .delete-chat-btn {
    color: rgba(0, 0, 0, 0.5);
}

 .delete-chat-btn:hover {
    color: #FF3B30;
}

 .nav-footer {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

 .settings-button {
    color: rgba(0, 0, 0, 0.8);
}

 .settings-button:hover {
    background: rgba(0, 0, 0, 0.1);
}

 .main-chat {
    background: #F5F5F5;
}

 .messages {
    background: #F5F5F5;
}

 .message.user {
    background: #E5E5EA;
}

 .message.assistant {
    background: #FFFFFF;
}

 .message .text {
    color: #000000;
}

 .input-area {
    background: #F5F5F5;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

 .input-container {
    background: #FFFFFF;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

 #user-input {
    color: #000000;
}

 .send-button {
    color: #000000;
}

 .send-button:hover {
    background: rgba(0, 0, 0, 0.1);
}

 .modal-content {
    background: #FFFFFF;
    color: #000000;
}

 .modal-content h2 {
    color: #000000;
}

 .modal-content label {
    color: rgba(0, 0, 0, 0.8);
}

 .modal-content input {
    background: #E5E5EA;
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: #000000;
}

 #save-settings-btn {
    background: #007AFF;
}

 #save-settings-btn:hover {
    background: #005BB5;
}

/* Light Mode Chat Name Color */
body .chat-name {
    color: #000000;
}

/* Modal Customizations - working with Bulma's modal system */
.modal-card {
    max-width: 400px;
    margin: 0 auto;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

#custom-modal .modal-content {
    background-color: #FFFFFF;
    margin: 80px auto;
    padding: 0;
    border: 1px solid #888;
    width: 90%;
    max-width: 400px;
    border-radius: 12px;
    overflow: hidden;
    animation: slideIn 0.3s ease;
}

.modal-footer {
    padding: 10px 20px;
    display: flex;
    justify-content: flex-end;
}

.modal-footer button {
    margin-left: 10px;
    padding: 10px 15px;
    background-color: #007aff;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.modal-footer button:hover {
    background-color: #005bbb;
}

/* Style for the Edit Instruction Button */
.selector-group button {
  background: #007AFF;
  color: #FFFFFF;
  border: none;
  padding: 5px 10px;
  margin-left: 10px;
  border-radius: 5px;
  cursor: pointer;
}

.selector-group button:hover {
  background: #005BBB;
}

/* Adjust for Light Mode if applicable */
body.light-mode .selector-group button {
  background: #007AFF;
  color: #FFFFFF;
}

body.light-mode .selector-group button:hover {
  background: #005BBB;
}

/* Custom Modal Textarea Styles */
#custom-modal textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #E5E5EA;
    border-radius: 8px;
    font-size: 15px;
    color: #1C1C1E;
    background: #FFFFFF;
    margin-top: 5px;
    box-sizing: border-box;
    resize: vertical;
}

#custom-modal textarea:focus {
    border-color: #007AFF;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
}

/* Adjust labels in modals */
#custom-modal label {
    display: block;
    margin-top: 10px;
    font-size: 14px;
    color: #3a3a3c;
}

/* Modal Footer Buttons */
.modal-footer button {
    margin-left: 10px;
    padding: 10px 20px;
    background-color: #007aff;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background-color 0.2s;
}

/* Input Field inside Modal */
#custom-modal input[type="text"] {
    width: 100%;
    padding: 12px;
    border: 1px solid #E5E5EA;
    border-radius: 8px;
    font-size: 15px;
    color: #1C1C1E;
    background: #FFFFFF;
    margin-top: 10px;
    box-sizing: border-box;
}

#custom-modal input[type="text"]:focus {
    border-color: #007AFF;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
}

.modal-footer button:hover {
    background-color: #005bbb;
}

body.light-mode .modal-footer button {
    background-color: #007aff;
    color: #fff;
}

body.light-mode .modal-footer button:hover {
    background-color: #005bbb;
}

/* Styling for rendered markdown content */
.message.assistant .text h1,
.message.assistant .text h2,
.message.assistant .text h3,
.message.assistant .text h4,
.message.assistant .text h5,
.message.assistant .text h6 {
    color: #FFFFFF;
    margin-top: 20px;
    margin-bottom: 10px;
}

.message.assistant .text p {
    margin-bottom: 15px;
}

.message.assistant .text a {
    color: #1E90FF;
    text-decoration: underline;
}

.message.assistant .text code {
    background-color: #2D2D2D;
    padding: 2px 4px;
    border-radius: 4px;
    font-family: monospace;
    color: #FFFFFF;
}

.message.assistant .text pre {
    background-color: #2D2D2D;
    padding: 10px;
    border-radius: 8px;
    overflow: auto;
    color: #FFFFFF;
}

/* Base styles for lists in assistant messages */
.message.assistant .text ul,
.message.assistant .text ol {
    margin-left: 1.5em;
    margin-bottom: 15px;
}

/* First-level lists */
.message.assistant .text ul {
    list-style-type: disc;
}

.message.assistant .text ol {
    list-style-type: decimal;
}

/* Second-level lists nested inside unordered lists */
.message.assistant .text ul ul {
    list-style-type: circle;
}

.message.assistant .text ul ol {
    list-style-type: lower-alpha;
}

/* Second-level lists nested inside ordered lists */
.message.assistant .text ol ul {
    list-style-type: circle;
}

.message.assistant .text ol ol {
    list-style-type: lower-alpha;
}

/* Third-level lists */
.message.assistant .text ul ul ul,
.message.assistant .text ol ul ul,
.message.assistant .text ul ol ul,
.message.assistant .text ol ol ul {
    list-style-type: square;
}

.message.assistant .text ul ul ol,
.message.assistant .text ol ul ol,
.message.assistant .text ul ol ol,
.message.assistant .text ol ol ol {
    list-style-type: lower-roman;
}

/* Indentation for nested lists */
.message.assistant .text ul ul,
.message.assistant .text ol ul,
.message.assistant .text ul ol,
.message.assistant .text ol ol {
    margin-left: 1.5em;
}

.message.assistant .text ul ul ul,
.message.assistant .text ol ul ul,
.message.assistant .text ul ol ul,
.message.assistant .text ol ol ul,
.message.assistant .text ul ul ol,
.message.assistant .text ol ul ol,
.message.assistant .text ul ol ol,
.message.assistant .text ol ol ol {
    margin-left: 1.5em;
}

.message.assistant .text blockquote {
    border-left: 4px solid #CCCCCC;
    padding-left: 15px;
    color: #AAAAAA;
    margin-bottom: 15px;
}

/* Loading Spinner Styles */
.loading-spinner {
    border: 4px solid rgba(255, 255, 255, 0.2);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border-top-color: #FFFFFF;
    animation: spin 1s ease-in-out infinite;
    margin: 0 auto;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Adjustments for light mode */
body.light-mode .loading-spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-top-color: #000000;
}

/* Action Container Style */
.action-container {
    position: absolute;
    bottom: 10px;
    left: 15px;
    right: 15px;
    display: flex;
    align-items: center;
}

.action-container > * {
    max-width: 50%;
}

/* Model Label Style */
.model-label {
    font-size: 12px;
    color: #AAA;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 50%;
    text-align: right;
}

/* Adjustments for light mode */
body.light-mode .model-label {
    color: #666;
}
