/**
 * interface.css
 * 
 * Main stylesheet for the chat interface application.
 * Organized into logical sections:
 * 
 * - Theme Variables
 * - Light Mode Theme Variables
 * - Reset and Base Styles
 * - Typography
 * - Layout Styles
 * - Component Styles
 *   - Buttons
 *   - Inputs
 *   - Messages
 *   - Modals
 *   - Switches
 * - Animations
 * - Responsive Styles
 */

/* ==========================================================================
   Theme Variables
   ========================================================================== */
:root {
  /* Colors - Dark Mode Default */
  --primary-color: #1E90FF;
  --primary-color-hover: #187BE8;
  --primary-color-active: #1569CC;
  --bg-color: #343541;
  --secondary-bg: #2D2D2D;
  --text-color: #FFFFFF;
  --border-color: rgba(255, 255, 255, 0.1);
  --hover-color: rgba(255, 255, 255, 0.1);
  --chat-name-color: #FFFFFF;
  --input-background: #FFFFFF;
  --input-border-color: var(--border-color);
  
  /* Message Colors */
  --message-bg-color: #FFFFFF;
  --user-message-bg-color: #E8F0FE;
  --assistant-message-bg-color: #FFFFFF;
  --modal-bg-color: #FFFFFF;
  --modal-header-bg: #f2f2f7;
  
  /* UI Component Colors */
  --copy-button-color: #AAA;
  --copy-button-hover-bg: rgba(255, 255, 255, 0.1);
  --copy-button-hover-color: #FFF;
  --button-bg: #007aff;
  --button-hover-bg: #005bbb;
  --button-text: #FFFFFF;
  --input-border: #E5E5EA;
  --input-focus-color: #007AFF;
  
  /* Spacing */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  
  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 1rem;
  
  /* Transitions */
  --transition-fast: 0.2s ease;
  --transition-normal: 0.3s ease;
  
  /* Typography */
  --font-size-sm: 0.875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.125rem;
  --line-height-normal: 1.5;
  --font-family: 'Inter', sans-serif;
  
  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 2px 6px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 15px 30px rgba(0, 0, 0, 0.1);
  
  /* Z-index */
  --z-modal: 1000;
  --z-overlay: 900;
  --z-dropdown: 800;
  --z-nav: 700;

  /* Additional Spacing */
  --spacing-xxs: 0.125rem;
  --spacing-xxl: 3rem;

  /* Additional Border Radius */
  --radius-full: 1.5rem;

  /* Button Size */
  --button-size: 2.5rem;
}

/* ==========================================================================
   Light Mode Theme Variables
   ========================================================================== */
body.light-mode {
  /* Colors */
  --bg-color: #F5F5F5;
  --secondary-bg: #FFFFFF;
  --text-color: #202124;
  --border-color: #E0E0E0;
  --hover-color: #EAF2FB;
  
  /* Message Colors */
  --message-bg-color: #FFFFFF;
  --user-message-bg-color: #E5E5EA;
  --assistant-message-bg-color: #FFFFFF;
  --modal-bg-color: #FFFFFF;
  --modal-header-bg: #f8f8f8;

  /* UI Components */
  --copy-button-color: #666;
  --copy-button-hover-bg: rgba(0, 0, 0, 0.1);
  --copy-button-hover-color: #000;
  --button-bg: #007aff;
  --button-hover-bg: #005bbb;
  --button-text: #FFFFFF;
  --input-border: #D1D1D6;
  --chat-name-color: #000000;
  
  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 2px 6px rgba(0, 0, 0, 0.05);
  --shadow-lg: 0 15px 30px rgba(0, 0, 0, 0.05);
}

/* ===== Reset and Base Styles ===== */

/* Reset Box Model */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Document Base */
html {
  font-size: 16px;
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: 'Inter', sans-serif;
  color: var(--text-color);
  background: var(--bg-color);
  min-height: 100vh;
}

/* ===== Typography ===== */
h1, h2, h3, h4, h5, h6 {
  font-weight: 600;
  color: var(--text-color);
  line-height: 1.2;
  margin-bottom: var(--spacing-md);
}

p {
  margin-bottom: var(--spacing-md);
  font-size: var(--font-size-md);
}

a {
  color: var(--primary-color);
  text-decoration: underline;
  transition: color var(--transition-fast);
}

a:hover {
  color: var(--primary-color-hover);
}

/* Focus Styles */
:focus-visible {
  outline: 2px solid var(--primary-color);
  outline-offset: 2px;
}

/* Switch styles */
/* ===================
   Switches
   =================== */

/* Toggle Switch Container */
/* Custom switch component for toggles */
.switch {
    position: relative;
    display: inline-block;
    width: 40px;
    height: 20px;
}

/* Hide default checkbox */
.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

/* Switch Slider */
.slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background-color: #ccc;
    transition: var(--transition-normal);
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px; width: 16px;
    left: 2px; bottom: 2px;
    background-color: white;
    transition: 0.4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: var(--primary-color);
}

input:checked + .slider:before {
    transform: translateX(20px);
}

/* ==========================================================================
   Responsive Styles
   ========================================================================== */

@media (max-width: 768px) {
    /* Layout Adjustments */
    .chat-layout {
        flex-direction: column;
    }

    .main-chat {
        margin-left: 0;
    }

    /* Sidebar Adjustments */
    .sidebar {
        position: fixed;
        width: 250px;
        height: 100%;
        transform: translateX(-260px);
        transition: transform 0.3s ease;
        z-index: var(--z-nav);
    }

    .sidebar.is-active {
        transform: translateX(0);
    }

    .navbar-burger {
        display: block;
    }
}


/* ==========================================================================
   Component Styles
   ========================================================================== */

/* ===== Layout Styles ===== */

/* Main Layout Structure */
.chat-layout {
    display: flex;
    height: 100vh;
    flex-direction: row;
}

/* Sidebar Styles */
.sidebar {
    width: 260px;
    background: var(--secondary-color);
    display: flex;
    flex-direction: column;
    color: var(--text-color);
    border-right: 1px solid var(--border-color);
}

.nav-header {
    padding: 10px;
}

.new-chat {
    width: 100%;
    padding: 12px;
    background: transparent;
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 5px;
    color: white;
    cursor: pointer;
    transition: background 0.2s;
}

.new-chat:hover {
    background: rgba(255,255,255,0.1);
}

.chat-list-container {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

#chat-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

#chat-list li {
    display: flex;
    align-items: center;
    padding: 10px;
    margin: 2px 0;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.2s;
}

#chat-list li:hover {
    background: rgba(255,255,255,0.1);
}

#chat-list li.active {
    background: rgba(255,255,255,0.1);
}

.chat-name {
    flex: 1;
    color: #FFFFFF;
    font-size: 14px;
}

.delete-chat-btn {
    color: rgba(255,255,255,0.5);
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    padding: 0 5px;
}

.delete-chat-btn:hover {
    color: #FF4444;
}

.nav-footer {
    padding: 10px;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.settings-button {
    width: 100%;
    padding: 10px;
    background: transparent;
    border: none;
    color: rgba(255,255,255,0.8);
    cursor: pointer;
    border-radius: 5px;
    transition: background 0.2s;
}

.settings-button:hover {
    background: rgba(255,255,255,0.1);
}

/* Main Chat Area */
.main-chat {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #343541;
    position: relative;
    min-height: 0;
}

.messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px 20px 0 20px;
    min-height: 0;
}

/* ===================
   Messages
   =================== */

/* Message Container */
/* Base styles for all message types */
.message {
    /* Layout */
    position: relative;
    max-width: 800px;
    margin: 0 auto 20px auto;
    padding: var(--spacing-lg);
    
    /* Visual */
    line-height: var(--line-height-normal);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
}

/* User Message */
.message.user {
    background-color: var(--user-message-bg-color);
    border-radius: 15px 15px 0 15px;
}

/* Assistant Message */
.message.assistant {
    background-color: var(--assistant-message-bg-color);
    border-radius: 15px 15px 15px 0;
}

.message .text {
    font-size: 16px;
    color: var(--text-color);
}

/* Style for the copy button */
.copy-button {
    background: none;
    border: none;
    color: #AAA;
    cursor: pointer;
    padding: 5px;
    border-radius: 5px;
    transition: background 0.2s, color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    flex-shrink: 0;
}

.copy-button svg {
    width: 16px;
    height: 16px;
}

.copy-button path {
    fill: currentColor;
}

.copy-button:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #FFF;
}

/* Adjustments for light mode */
body.light-mode .copy-button {
    color: #666;
}

body.light-mode .copy-button:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #000;
}

.message {
    background-color: #FFFFFF;
    border-radius: 15px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    margin-bottom: 30px;
    padding: 20px;
    opacity: 0;
    animation: fadeIn 0.5s forwards;
}

/* ==========================================================================
   Animations
   ========================================================================== */

/* Fade In Animation */
@keyframes fadeIn {
    to {
        opacity: 1;
    }
}

/* Slide In Animation */
@keyframes slideIn {
    from { 
        opacity: 0; 
        transform: translateY(-20px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

/* Spin Animation */
@keyframes spin {
    to { 
        transform: rotate(360deg); 
    }
}

.message.user {
    background-color: var(--user-message-bg-color);
    align-self: flex-end;
    border-radius: 15px 15px 0 15px;
}

.message.assistant {
    background-color: var(--assistant-message-bg-color);
    align-self: flex-start;
    border-radius: 15px 15px 15px 0;
}

.message .text {
    color: var(--text-color);
    font-size: 16px;
    line-height: 1.6;
}

/* Input Area */
.input-area {
    padding: 20px;
    background: #343541;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.input-container {
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    background: #FFFFFF;
    border: 1px solid var(--border-color);
    border-radius: 25px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    padding: 5px 15px;
}

/* ===================
   Inputs
   =================== */

/* User Input Field */
/* Main chat input textarea */
#user-input {
    /* Layout */
    width: 100%;
    padding: 15px;
    margin-right: 10px;
    box-sizing: border-box;
    
    /* Visual */
    background: transparent;
    border: none;
    color: var(--text-color);
    font-size: var(--font-size-md);
    resize: none;
}

#user-input:focus {
    outline: none;
}

#user-input:focus {
    outline: none;
}

/* ===================
   Buttons
   =================== */

/* Send Button */
/* Circular button used to send messages */
.send-button {
    /* Layout */
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--button-size);
    height: var(--button-size);
    
    /* Visual */
    background: var(--button-bg);
    color: var(--button-text);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.send-button:hover {
    background-color: var(--primary-color-hover);
    transform: scale(1.05);
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ===================
   Modals
   =================== */

/* Modal Container */
/* Base modal window styles */
.modal-content {
    /* Layout */
    position: relative;
    width: 90%;
    max-width: 400px;
    margin: 80px auto;
    
    /* Visual */
    background: var(--modal-bg-color);
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    animation: slideIn 0.3s ease;
}

/* Modal Header */
.modal-header {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    padding: 20px;
    background: #f2f2f7;
    border-bottom: 1px solid #e5e5ea;
}

.modal-header h2 {
    margin: 0;
    font-size: 20px;
    font-weight: 600;
    color: #1c1c1e;
}

/* Close Button */
.close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    transition: transform 0.2s;
}

.close svg {
    width: 20px;
    height: 20px;
    fill: #1c1c1e;
}

.close:hover {
    transform: rotate(90deg);
}

/* Modal Body */
.modal-body {
    padding: 24px;
}

.input-group {
    margin-bottom: 24px;
}

.input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.input-icon {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    color: #8E8E93;
    pointer-events: none;
}

.input-group label,
.input-group span {
    display: block;
    margin-bottom: 8px;
    font-size: 14px;
    color: #3a3a3c;
}

.input-group input[type="text"],
.input-group input[type="password"] {
    width: 100%;
    padding: 12px 36px 12px 12px;
    border: 1px solid #E5E5EA;
    border-radius: 8px;
    font-size: 15px;
    color: #1C1C1E;
    background: #FFFFFF;
    transition: all 0.2s ease;
}

.input-group input[type="text"]:focus,
.input-group input[type="password"]:focus {
    border-color: #007AFF;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
    outline: none;
}

.input-group input[type="text"]:focus,
.input-group input[type="password"]:focus {
    border-color: #007aff;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.3);
    outline: none;
}


/* Save Button */
#save-settings-btn {
    width: 100%;
    padding: 15px;
    background: #007aff;
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s, transform 0.2s;
}

#save-settings-btn:hover {
    background-color: #005bbb;
    transform: scale(1.02);
}


/* Settings Modal Adjustments */
.modal-content label,
.modal-content span {
    margin-top: 20px;
    font-size: 15px;
}

.modal-content input,
.modal-content select {
    margin-top: 5px;
}

.modal-content input,
.modal-content select,
.modal-content {
    width: 100%;
}

/* Light Mode Modal Title Color */
body .modal-content h2 {
    color: #000000;
}

/* Light Mode Styles */
body {
    background-color: #F5F5F5;
    color: #000000;
}

 .sidebar {
    background: #FFFFFF;
    color: #000000;
}

 .new-chat {
    border: 1px solid rgba(0, 0, 0, 0.2);
    color: #000000;
}

 .new-chat:hover {
    background: rgba(0, 0, 0, 0.1);
}

 .chat-list-container {
    background: #FFFFFF;
}

 #chat-list li {
    background: #FFFFFF;
    color: #000000;
}

 #chat-list li:hover,
 #chat-list li.active {
    background: rgba(0, 0, 0, 0.1);
}

 .delete-chat-btn {
    color: rgba(0, 0, 0, 0.5);
}

 .delete-chat-btn:hover {
    color: #FF3B30;
}

 .nav-footer {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

 .settings-button {
    color: rgba(0, 0, 0, 0.8);
}

 .settings-button:hover {
    background: rgba(0, 0, 0, 0.1);
}

 .main-chat {
    background: #F5F5F5;
}

 .messages {
    background: #F5F5F5;
}

 .message.user {
    background: #E5E5EA;
}

 .message.assistant {
    background: #FFFFFF;
}

 .message .text {
    color: #000000;
}

 .input-area {
    background: #F5F5F5;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}

 .input-container {
    background: #FFFFFF;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

 #user-input {
    color: #000000;
}

 .send-button {
    color: #000000;
}

 .send-button:hover {
    background: rgba(0, 0, 0, 0.1);
}

 .modal-content {
    background: #FFFFFF;
    color: #000000;
}

 .modal-content h2 {
    color: #000000;
}

 .modal-content label {
    color: rgba(0, 0, 0, 0.8);
}

 .modal-content input {
    background: #E5E5EA;
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: #000000;
}

 #save-settings-btn {
    background: #007AFF;
}

 #save-settings-btn:hover {
    background: #005BB5;
}

/* Light Mode Chat Name Color */
body .chat-name {
    color: #000000;
}

/* Modal Customizations - working with Bulma's modal system */
.modal-card {
    max-width: 400px;
    margin: 0 auto;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

#custom-modal .modal-content {
    background-color: #FFFFFF;
    margin: 80px auto;
    padding: 0;
    border: 1px solid #888;
    width: 90%;
    max-width: 400px;
    border-radius: 12px;
    overflow: hidden;
    animation: slideIn 0.3s ease;
}

.modal-footer {
    padding: 10px 20px;
    display: flex;
    justify-content: flex-end;
}

.modal-footer button {
    margin-left: 10px;
    padding: 10px 15px;
    background-color: #007aff;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.modal-footer button:hover {
    background-color: #005bbb;
}


/* Custom Modal Textarea Styles */
#custom-modal textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #E5E5EA;
    border-radius: 8px;
    font-size: 15px;
    color: #1C1C1E;
    background: #FFFFFF;
    margin-top: 5px;
    box-sizing: border-box;
    resize: vertical;
}

#custom-modal textarea:focus {
    border-color: #007AFF;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
}

/* Adjust labels in modals */
#custom-modal label {
    display: block;
    margin-top: 10px;
    font-size: 14px;
    color: #3a3a3c;
}

/* Modal Footer Buttons */
.modal-footer button {
    margin-left: 10px;
    padding: 10px 20px;
    background-color: #007aff;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background-color 0.2s;
}

/* Input Field inside Modal */
#custom-modal input[type="text"] {
    width: 100%;
    padding: 12px;
    border: 1px solid #E5E5EA;
    border-radius: 8px;
    font-size: 15px;
    color: #1C1C1E;
    background: #FFFFFF;
    margin-top: 10px;
    box-sizing: border-box;
}

#custom-modal input[type="text"]:focus {
    border-color: #007AFF;
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
}

.modal-footer button:hover {
    background-color: #005bbb;
}

body.light-mode .modal-footer button {
    background-color: #007aff;
    color: #fff;
}

body.light-mode .modal-footer button:hover {
    background-color: #005bbb;
}

/* Styling for rendered markdown content */
.message.assistant .text h1,
.message.assistant .text h2,
.message.assistant .text h3,
.message.assistant .text h4,
.message.assistant .text h5,
.message.assistant .text h6 {
    color: #FFFFFF;
    margin-top: 20px;
    margin-bottom: 10px;
}

.message.assistant .text p {
    margin-bottom: 15px;
}

.message.assistant .text a {
    color: #1E90FF;
    text-decoration: underline;
}

.message.assistant .text code {
    background-color: #2D2D2D;
    padding: 2px 4px;
    border-radius: 4px;
    font-family: monospace;
    color: #FFFFFF;
}

.message.assistant .text pre {
    background-color: #2D2D2D;
    padding: 10px;
    border-radius: 8px;
    overflow: auto;
    color: #FFFFFF;
}

/* Base styles for lists in assistant messages */
.message.assistant .text ul,
.message.assistant .text ol {
    margin-left: 1.5em;
    margin-bottom: 15px;
}

/* First-level lists */
.message.assistant .text ul {
    list-style-type: disc;
}

.message.assistant .text ol {
    list-style-type: decimal;
}

/* Second-level lists nested inside unordered lists */
.message.assistant .text ul ul {
    list-style-type: circle;
}

.message.assistant .text ul ol {
    list-style-type: lower-alpha;
}

/* Second-level lists nested inside ordered lists */
.message.assistant .text ol ul {
    list-style-type: circle;
}

.message.assistant .text ol ol {
    list-style-type: lower-alpha;
}

/* Third-level lists */
.message.assistant .text ul ul ul,
.message.assistant .text ol ul ul,
.message.assistant .text ul ol ul,
.message.assistant .text ol ol ul {
    list-style-type: square;
}

.message.assistant .text ul ul ol,
.message.assistant .text ol ul ol,
.message.assistant .text ul ol ol,
.message.assistant .text ol ol ol {
    list-style-type: lower-roman;
}

/* Indentation for nested lists */
.message.assistant .text ul ul,
.message.assistant .text ol ul,
.message.assistant .text ul ol,
.message.assistant .text ol ol {
    margin-left: 1.5em;
}

.message.assistant .text ul ul ul,
.message.assistant .text ol ul ul,
.message.assistant .text ul ol ul,
.message.assistant .text ol ol ul,
.message.assistant .text ul ul ol,
.message.assistant .text ol ul ol,
.message.assistant .text ul ol ol,
.message.assistant .text ol ol ol {
    margin-left: 1.5em;
}

.message.assistant .text blockquote {
    border-left: 4px solid #CCCCCC;
    padding-left: 15px;
    color: #AAAAAA;
    margin-bottom: 15px;
}

/* Loading Spinner Styles */
.loading-spinner {
    border: 4px solid rgba(255, 255, 255, 0.2);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border-top-color: #FFFFFF;
    animation: spin 1s ease-in-out infinite;
    margin: 0 auto;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Adjustments for light mode */
body.light-mode .loading-spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-top-color: #000000;
}

